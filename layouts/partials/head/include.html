{{- $title := partialCached "data/title" . .RelPermalink -}}
{{- $description := partialCached "data/description" . .RelPermalink -}}

<!-- OpenGrap tile -->
<meta property="og:title" content="{{ $title }}" />
<!-- OpenGrap description -->
<meta property="og:description" content="{{ $description }}" />
<!-- OpenGrap url -->
<meta property="og:url" content="{{ .Permalink }}" />
<!-- OpenGrap site name -->
<meta property="og:site_name" content="{{ .Site.Title }}" />
<!-- OpenGrap type -->
<meta property="og:type" content="
    {{- if .IsPage -}}
        article
    {{- else -}}
        website
    {{- end -}}
" />

<!-- OpenGrap locale -->
{{- with .Params.locale -}}
<meta property="og:locale" content="{{ . }}" />
{{- end -}}

<!-- OpenGrap article -->
{{- if .IsPage -}}
<meta property="article:section" content="{{ .Section | title }}" />
{{- range .Params.tags -}}
<meta property="article:tag" content="{{ . }}" />
{{- end -}} {{- end -}}

<!-- OpenGrap page -->
{{- if .IsPage -}}
{{- if not .Date.IsZero -}}
<meta property="article:published_time" content='{{ .Date.Format "2006-01-02T15:04:05-07:00" | safeHTML }}' />
{{- end -}}
{{- if not .Lastmod.IsZero -}}
<meta property="article:modified_time" content='{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" | safeHTML }}' />
{{- end -}}
{{- else -}}
{{- if not .Site.LastChange.IsZero -}}
<meta property="og:updated_time" content='{{ .Site.LastChange.Format " 2006-01-02T15:04:05-07:00 " | safeHTML }}' />
{{- end -}}
{{- end -}}

<!-- OpenGrap Image-->
{{ $image := partialCached "helper/image" (dict "Context" . "Type" "opengraph")
.RelPermalink "opengraph" }} {{- if $image.exists -}}
<meta property="og:image" content="{{ absURL $image.permalink }}" />
{{- end -}}

<!-- OpenGrap Twitter -->
{{- with .Site.Params.opengraph.twitter.site -}}
<meta name="twitter:site" content="@{{ . }}" />
<meta name="twitter:creator" content="@{{ . }}" />
{{- end -}}

<!-- getData -->
{{- $title := partialCached "data/title" . .RelPermalink -}} {{- $description :=
partialCached "data/description" . .RelPermalink -}}

<!-- OpenGrap Twitter title -->
<meta name="twitter:title" content="{{ $title }}" />
<!-- OpenGrap Twitter description -->
<meta name="twitter:description" content="{{ $description }}" />

<!-- OpenGrap Twitter card -->
{{- if .Params.img -}}
<meta property="og:image" content="{{ .Params.img }}" />
<meta name="twitter:card" content="{{ default `summary_large_image` .Site.Params.opengraph.twitter.card }}" />
<meta name="twitter:image" content="{{ .Params.img }}" />
{{- end -}}